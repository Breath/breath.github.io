(this["webpackJsonpokami-viewer"]=this["webpackJsonpokami-viewer"]||[]).push([[0],{65:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(13),o=a.n(r),c=a(9),i=(a(63),a(64),a(65),a(15)),s=a(7),u=a(75),m=a(77),p=a(21),d=a(22),g="\u014ckami",h={github:"Breath"},b={arraySeparator:"|"},f=function(){return l.a.createElement(u.a,null,l.a.createElement(u.a.Brand,{as:i.b,to:"/"},g),l.a.createElement(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(u.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(m.a,{className:"mr-auto"},l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Link,{as:i.b,to:"/"},l.a.createElement(p.a,{icon:d.c})," Home")),l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Link,{as:i.b,to:"/source"},l.a.createElement(p.a,{icon:d.b})," Source")),l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Link,{as:i.b,to:"/blacklist"},l.a.createElement(p.a,{icon:d.e})," Blacklist")),l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Link,{as:i.b,to:"/guide"},l.a.createElement(p.a,{icon:d.a})," Guide")),l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Link,{as:i.b,to:"/about"},l.a.createElement(p.a,{icon:d.d})," About")))))},E=a(18),v=function(e,t){for(var a=t,n=0;n<e.length;n++)a=a[e[n]];return a},y=function(e){var t=e.split("."),a=t[t.length-1];return["mp4","webm"].includes(a)?"video":"gif"===a?"gif":"swf"===a?"flash":"image"},k=function(e){return l.a.createElement("div",{className:"container mt-5"},e.children)},j=function(){return l.a.createElement(k,null,l.a.createElement("h1",null,"About"),l.a.createElement("p",null,l.a.createElement("strong",null,g)," is a simple, easy to use alternative to most image gallery's UI. Made using React by ",function(e,t){var a,n=null;switch(e){case"github":n="https://github.com/"+t}return l.a.createElement("span",null,l.a.createElement("strong",null,l.a.createElement("a",{href:n},"@",t))," on ",l.a.createElement("strong",null,(a=e).charAt(0).toUpperCase()+a.slice(1)))}("github",h.github),"."),l.a.createElement("h3",null,"To-do"),l.a.createElement("ul",null,l.a.createElement("li",null,"Persistent search parameters."),l.a.createElement("li",null,"Add usage tab/section."),l.a.createElement("li",null,"Implement pagination feature to the home page."),l.a.createElement("li",null,"Add ",l.a.createElement("code",null,"order:"),", ",l.a.createElement("code",null,"date:"),", etc sliders to search box."),l.a.createElement("li",null,"Create a logo (and add ",l.a.createElement("code",null,"favicon.ico")," / ",l.a.createElement("code",null,"logo192.png"),").")),l.a.createElement("h3",null,"v0.2.1"),l.a.createElement("ul",null,l.a.createElement("li",null,"Added brand name to the navbar."),l.a.createElement("li",null,"Added a guide page on how to use the site."),l.a.createElement("li",null,"Improved code for posts page."),l.a.createElement("li",null,"...and other minor improvements.")),l.a.createElement("h3",null,"v0.2.0"),l.a.createElement("ul",null,l.a.createElement("li",null,"Implemented blacklist functionality."),l.a.createElement("li",null,"Improved code for cookies."),l.a.createElement("li",null,"Added toast notifications (top right)."),l.a.createElement("li",null,"Added FontAwesome icons to the navbar.")),l.a.createElement("h3",null,"v0.1.1"),l.a.createElement("ul",null,l.a.createElement("li",null,"Renamed ",l.a.createElement("code",null,"Sites")," page to ",l.a.createElement("code",null,"Source"),"."),l.a.createElement("li",null,"Updated search box on the front page to be more centered.")),l.a.createElement("h3",null,"v0.1.0"),l.a.createElement("ul",null,l.a.createElement("li",null,"Initial release.")))},O=a(14),w=a(76),S=a(74),C=a(73),L=a(78),I=a(45),_=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.blacklist})),a=Object(w.a)(["blacklist"]),n=Object(O.a)(a,2),r=n[0],o=n[1];if(t.length<1&&void 0!==r.blacklist){var i=r.blacklist.toString().split(b.arraySeparator).filter((function(e){return""!==e&&void 0!==e}));i.length>0&&e({type:"blacklist/set",payload:i})}var s=function(a){a.preventDefault();var n=t.filter((function(e){return e!==a.target.innerHTML}));e({type:"blacklist/set",payload:n}),o("blacklist",n.join(b.arraySeparator),{path:"/"})};return l.a.createElement(k,null,l.a.createElement("h1",null,"Blacklist"),l.a.createElement("p",null,"Choose which tags you want to block from your search. Separate multiple tags using a space, such as: ",l.a.createElement("code",null,"blocked_tag_one blocked_tag_two")),l.a.createElement(S.a,{onSubmit:function(a){a.preventDefault();for(var n=a.target.tags.value.split(" "),l=[],r=0;r<n.length;r++)""!==n[r]&&void 0!==n[r]&&(t.includes(n[r])?I.b.error("'".concat(n[r],"' is already blacklisted."),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):l.push(n[r]));var c=[].concat(Object(E.a)(t),l);e({type:"blacklist/set",payload:c}),o("blacklist",c.join(b.arraySeparator),{path:"/"}),a.target.tags.value=null},inline:!0},l.a.createElement(S.a.Group,{controlId:"formBlacklist"},l.a.createElement(S.a.Control,{className:"mb-2 mr-sm-2",type:"text",name:"tags",placeholder:"Tags to blacklist..."}),l.a.createElement(C.a,{variant:"primary",type:"submit",className:"mb-2"},"Add"))),l.a.createElement(L.a,null,t.map((function(e,t){return l.a.createElement(L.a.Item,{variant:"danger",key:t,onClick:s},e)}))),l.a.createElement(I.a,null))},N=a(6),A=a(31),x={e621:{name:"e621",display:"e621",descriptors:["furry","nsfw"],url:{base:"https://e621.net",post:"https://e621.net/posts.json",params:{tags:"tags",page:"page",limit:"limit"}},posts:["posts"],file:{post:["id"],preview:["preview","url"],full:["file","url"]},tags:{general:["tags","general"],character:["tags","character"],copyright:["tags","copyright"],artist:["tags","artist"],meta:["tags","meta"],other:[["tags","species"],["tags","invalid"],["tags","lore"]]}},danbooru:{name:"danbooru",display:"Danbooru",descriptors:["anime","nsfw"],url:{base:"https://danbooru.donmai.us",post:"https://danbooru.donmai.us/posts.json",params:{tags:"tags",page:"page",limit:"limit"}},posts:[],file:{post:["id"],preview:["preview_file_url"],full:["file_url"]},tags:{general:["tag_string_general"],character:["tag_string_character"],copyright:["tag_string_copyright"],artist:["tag_string_artist"],meta:["tag_string_meta"],other:[]}}},B={posts:[],config:"e621",blacklist:[]};var F=Object(A.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"config/modify":return Object(N.a)(Object(N.a)({},e),{},{config:t.payload});case"posts/set":return Object(N.a)(Object(N.a)({},e),{},{posts:t.payload});case"blacklist/set":return Object(N.a)(Object(N.a)({},e),{},{blacklist:t.payload});default:return e}})),T=function(){return l.a.createElement(k,null,l.a.createElement("h1",null,"Guide"),l.a.createElement("h3",null,"Home"),l.a.createElement("p",null,"When you first go on the site you will be greeted with the home page. From here you will be able to search for posts using the various input boxes. Enter in a few phrases of what you want (for instance, ",l.a.createElement("code",null,"order:score rating:s date:month"),' will find you the highest ranked SFW posts in the last month for most image sites), then click the blue "search" button to find posts.'),l.a.createElement("h3",null,"Source"),l.a.createElement("p",null,"On the source page you can change where the app gets posts from. Currently the site supports the following sources officially:"),l.a.createElement("ul",null,Object.keys(x).map((function(e,t){return l.a.createElement("li",null,x[e].display)}))),l.a.createElement("p",null,"Simply click on the card of the site you want to use, then head back to the home page and search. This value will be saved across site visits if you have cookies enabled."),l.a.createElement("h3",null,"Blacklist"),l.a.createElement("p",null,'If you want to block out certain posts from showing up you can block them based on the tags they have in the Blacklist tab. Simply type in the tags you want to block out and press the blue "add" button. These values will be saved across site visits if you have cookies enabled.'))},G=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.config})),n=Object(w.a)(["site"]),r=Object(O.a)(n,2),o=r[0],i=r[1];void 0!==o.site&&o.site!==a&&t({type:"config/modify",payload:e.name});return l.a.createElement("div",{className:"card",onClick:function(a){t({type:"config/modify",payload:e.name}),i("site",e.name,{path:"/"})}},l.a.createElement("div",{className:"card-body"},a===e.name?l.a.createElement("h2",null,l.a.createElement("strong",null,e.config.display)," (selected)"):l.a.createElement("h2",null,e.config.display),l.a.createElement("p",null,e.config.descriptors.join(", "))))},D=function(){return l.a.createElement(k,null,l.a.createElement("h1",null,"Source"),l.a.createElement("p",null,"Choose which site to get posts from."),Object.keys(x).map((function(e,t){return l.a.createElement(G,{key:e,name:e,config:x[e]})})))},H=function(e){var t=Object(c.c)((function(e){return e.config})),a=x[t],r=v(a.file.full,e.post),o=Object(n.useState)(r?{error:!1,post:v(a.file.post,e.post),full:r,preview:v(a.file.preview,e.post),type:y(r),displayFull:!1}:{error:!0}),i=Object(O.a)(o,2),s=i[0],u=i[1];if(s.error)return null;return l.a.createElement("div",{className:"post"},l.a.createElement("img",{src:s.displayFull?s.full:s.preview,className:s.type,onClick:function(){if("image"===s.type||"gif"===s.type)if(s.displayFull){var e=window.open(s.full);e&&(e.opener=null)}else u(Object(N.a)(Object(N.a)({},s),{},{displayFull:!0}));else{var t=window.open(s.full,"_blank","noopener,noreferrer");t&&(t.opener=null)}},onMouseDown:function(e){if(1===e.button){var t=window.open(s.full);t&&(t.opener=null)}}}))},P=function(e){var t=Object(n.useState)({tags:"rating:s",page:1,limit:25}),a=Object(O.a)(t,2),r=a[0],o=a[1];return l.a.createElement("div",{className:"container mt-5 mb-5"},l.a.createElement(S.a,{id:"search-form",onSubmit:e.doSearch},l.a.createElement(S.a.Group,{controlId:"tags"},l.a.createElement(S.a.Label,null,"Tags"),l.a.createElement(S.a.Control,{name:"tags",type:"text",value:r.tags,onChange:function(e){return o(Object(N.a)(Object(N.a)({},r),{},{tags:e.target.value}))}})),l.a.createElement(S.a.Group,{controlId:"page"},l.a.createElement(S.a.Label,null,"Page"),l.a.createElement(S.a.Control,{name:"page",type:"number",value:r.page,onChange:function(e){return o(Object(N.a)(Object(N.a)({},r),{},{page:e.target.value}))}})),l.a.createElement(S.a.Group,{controlId:"limit"},l.a.createElement(S.a.Label,null,"Limit"),l.a.createElement(S.a.Control,{name:"limit",type:"number",value:r.limit,onChange:function(e){return o(Object(N.a)(Object(N.a)({},r),{},{limit:e.target.value}))}})),l.a.createElement(C.a,{className:"mt-2",variant:"primary",type:"submit"},"Search")))},U=function(e){var t=Object(c.b)(),a=Object(n.useState)({error:null,hasSearched:!1,isLoaded:!1,blacklistedCount:0}),r=Object(O.a)(a,2),o=r[0],i=r[1],s=Object(c.c)((function(e){return e.posts})),u=Object(c.c)((function(e){return e.config})),m=Object(c.c)((function(e){return e.blacklist})),p=function(e){return o.error?l.a.createElement("div",{className:"error"},"Error: ",o.error.message):!o.isLoaded&&o.hasSearched?l.a.createElement("div",{className:"loading"},"Loading..."):o.isLoaded&&s.length<1&&!o.error?l.a.createElement("div",{className:"error"},"No posts were found. (",o.blacklistedCount," posts were blacklisted)"):o.isLoaded?l.a.createElement("div",{id:"posts"},e.items.map((function(e){return l.a.createElement(H,{post:e})}))):l.a.createElement("div",null)};return l.a.createElement("div",null,l.a.createElement(P,{doSearch:function(e){e.preventDefault(),i(Object(N.a)(Object(N.a)({},o),{},{hasSearched:!0,isLoaded:!1}));var a=x[u];fetch(a.url.post+"?"+new URLSearchParams({tags:e.target.tags.value,page:e.target.page.value,limit:e.target.limit.value})).then((function(e){return e.json()})).then((function(e){var n=v(a.posts,e),l=0,r=n.filter((function(e){var t=function(e,t){var a=[];Object.keys(t).forEach((function(e,n){if("other"===e)for(var l=0;l<t[e].length;l++)a.push(t[e][l]);else a.push(t[e])}));for(var n=[],l=0;l<a.length;l++){var r=v(a[l],e);n=[].concat(Object(E.a)(n),"string"===typeof r?Object(E.a)(r.split(" ")):Object(E.a)(r))}return n}(e,a.tags);return!m.some((function(e){return t.includes(e)}))||(l++,!1)}));i(Object(N.a)(Object(N.a)({},o),{},{isLoaded:!0,error:!1,blacklistedCount:l})),t({type:"posts/set",payload:r})}),(function(e){i(Object(N.a)(Object(N.a)({},o),{},{isLoaded:!0,error:!0})),t({type:"posts/set",payload:[]})}))}}),l.a.createElement(p,{items:s}))},M=function(){return l.a.createElement(U,null)},R=function(){return l.a.createElement(i.a,null,l.a.createElement(f,null),l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/",component:M}),l.a.createElement(s.a,{exact:!0,path:"/source",component:D}),l.a.createElement(s.a,{exact:!0,path:"/blacklist",component:_}),l.a.createElement(s.a,{exact:!0,path:"/guide",component:T}),l.a.createElement(s.a,{exact:!0,path:"/about",component:j})))};o.a.render(l.a.createElement(c.a,{store:F},l.a.createElement(R,null)),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.f01c0f4a.chunk.js.map