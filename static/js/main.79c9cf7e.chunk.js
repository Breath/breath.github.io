(this["webpackJsonpokami-viewer"]=this["webpackJsonpokami-viewer"]||[]).push([[0],{66:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(14),c=a.n(r),o=a(8),i=(a(64),a(65),a(66),a(11)),s=a(77),u=a(15),m=a(7),p=a(6),d=a(32),g={e621:{name:"e621",display:"e621",descriptors:["furry","nsfw"],url:{base:"https://e621.net",post:"https://e621.net/posts.json",params:{tags:"tags",page:"page",limit:"limit"}},posts:["posts"],file:{post:["id"],preview:["preview","url"],full:["file","url"]},tags:{general:["tags","general"],character:["tags","character"],copyright:["tags","copyright"],artist:["tags","artist"],meta:["tags","meta"],other:[["tags","species"],["tags","invalid"],["tags","lore"]]}},danbooru:{name:"danbooru",display:"Danbooru",descriptors:["anime","nsfw"],url:{base:"https://danbooru.donmai.us",post:"https://danbooru.donmai.us/posts.json",params:{tags:"tags",page:"page",limit:"limit"}},posts:[],file:{post:["id"],preview:["preview_file_url"],full:["file_url"]},tags:{general:["tag_string_general"],character:["tag_string_character"],copyright:["tag_string_copyright"],artist:["tag_string_artist"],meta:["tag_string_meta"],other:[]}}},h={posts:[],config:null,blacklist:[],search:{tags:null,page:1,limit:50}};var b=Object(d.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"config/modify":return Object(p.a)(Object(p.a)({},e),{},{config:t.payload});case"posts/set":return Object(p.a)(Object(p.a)({},e),{},{posts:t.payload});case"blacklist/set":return Object(p.a)(Object(p.a)({},e),{},{blacklist:t.payload});case"search/tags":return Object(p.a)(Object(p.a)({},e),{},{search:Object(p.a)(Object(p.a)({},e.search),{},{tags:t.payload})});case"search/page":return Object(p.a)(Object(p.a)({},e),{},{search:Object(p.a)(Object(p.a)({},e.search),{},{page:t.payload})});case"search/limit":return Object(p.a)(Object(p.a)({},e),{},{search:Object(p.a)(Object(p.a)({},e.search),{},{limit:t.payload})});default:return e}})),f=a(76),E=a(78),v=a(22),y=a(23),j="\u014ckami",k={github:"Breath"},O={arraySeparator:"|"},w=function(){return n.a.createElement(f.a,{expand:"lg"},n.a.createElement(f.a.Brand,{as:u.b,to:"/"},j),n.a.createElement(f.a.Toggle,{"aria-controls":"okamiNavbar"}),n.a.createElement(f.a.Collapse,{id:"okamiNavbar"},n.a.createElement(E.a,{className:"mr-auto"},n.a.createElement(E.a.Item,null,n.a.createElement(E.a.Link,{as:u.b,to:"/"},n.a.createElement(v.a,{icon:y.c})," Home")),n.a.createElement(E.a.Item,null,n.a.createElement(E.a.Link,{as:u.b,to:"/source"},n.a.createElement(v.a,{icon:y.b})," Source")),n.a.createElement(E.a.Item,null,n.a.createElement(E.a.Link,{as:u.b,to:"/blacklist"},n.a.createElement(v.a,{icon:y.e})," Blacklist")),n.a.createElement(E.a.Item,null,n.a.createElement(E.a.Link,{as:u.b,to:"/guide"},n.a.createElement(v.a,{icon:y.a})," Guide")),n.a.createElement(E.a.Item,null,n.a.createElement(E.a.Link,{as:u.b,to:"/about"},n.a.createElement(v.a,{icon:y.d})," About")))))},S=a(18),C=function(e,t){for(var a=t,l=0;l<e.length;l++)a=a[e[l]];return a},I=function(e){var t=e.split("."),a=t[t.length-1];return["mp4","webm"].includes(a)?"video":"gif"===a?"gif":"swf"===a?"flash":"image"},L=function(e){return n.a.createElement("div",{className:"container mt-5"},e.children)},_=function(){return n.a.createElement(L,null,n.a.createElement("h1",null,"About"),n.a.createElement("p",null,n.a.createElement("strong",null,j)," is a simple, easy to use alternative to most image gallery's UI. Made using React by ",function(e,t){var a,l=null;switch(e){case"github":l="https://github.com/"+t}return n.a.createElement("span",null,n.a.createElement("strong",null,n.a.createElement("a",{href:l},"@",t))," on ",n.a.createElement("strong",null,(a=e).charAt(0).toUpperCase()+a.slice(1)))}("github",k.github),"."),n.a.createElement("h3",null,"To-do"),n.a.createElement("ul",null,n.a.createElement("li",null,"Implement pagination feature to the home page"),n.a.createElement("li",null,"Add ",n.a.createElement("code",null,"order:"),", ",n.a.createElement("code",null,"date:"),", etc sliders to search box"),n.a.createElement("li",null,"Create a logo (and add ",n.a.createElement("code",null,"favicon.ico")," / ",n.a.createElement("code",null,"logo192.png"),")")),n.a.createElement("h3",null,"v0.2.2"),n.a.createElement("ul",null,n.a.createElement("li",null,"Added a logo (Times New Roman \u014c)"),n.a.createElement("li",null,"Improved wording of the guide and added more help"),n.a.createElement("li",null,"Implemented persistent search parameters"),n.a.createElement("li",null,"Fixed an issue with the navbar not collapsing"),n.a.createElement("li",null,"Fixed cookies for the source page not saving unless you visited the page")),n.a.createElement("h3",null,"v0.2.1"),n.a.createElement("ul",null,n.a.createElement("li",null,"Added brand name to the navbar"),n.a.createElement("li",null,"Added a guide page on how to use the site"),n.a.createElement("li",null,"Improved code for posts page"),n.a.createElement("li",null,"...and other minor improvements")),n.a.createElement("h3",null,"v0.2.0"),n.a.createElement("ul",null,n.a.createElement("li",null,"Implemented blacklist functionality"),n.a.createElement("li",null,"Improved code for cookies"),n.a.createElement("li",null,"Added toast notifications (top right)"),n.a.createElement("li",null,"Added FontAwesome icons to the navbar")),n.a.createElement("h3",null,"v0.1.1"),n.a.createElement("ul",null,n.a.createElement("li",null,"Renamed ",n.a.createElement("code",null,"Sites")," page to ",n.a.createElement("code",null,"Source")),n.a.createElement("li",null,"Updated search box on the front page to be more centered")),n.a.createElement("h3",null,"v0.1.0"),n.a.createElement("ul",null,n.a.createElement("li",null,"Initial release")))},N=a(75),x=a(74),A=a(79),B=a(21),F=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.blacklist})),a=Object(s.a)(["blacklist"]),l=Object(i.a)(a,2),r=l[0],c=l[1];if(t.length<1&&void 0!==r.blacklist){var u=r.blacklist.toString().split(O.arraySeparator).filter((function(e){return""!==e&&void 0!==e}));u.length>0&&e({type:"blacklist/set",payload:u})}var m=function(a){a.preventDefault();var l=t.filter((function(e){return e!==a.target.innerHTML}));e({type:"blacklist/set",payload:l}),c("blacklist",l.join(O.arraySeparator),{path:"/"})};return n.a.createElement(L,null,n.a.createElement("h1",null,"Blacklist"),n.a.createElement("p",null,"Choose which tags you want to block from your search. Separate multiple tags using a space, such as: ",n.a.createElement("code",null,"blocked_tag_one blocked_tag_two")),n.a.createElement(N.a,{onSubmit:function(a){a.preventDefault();for(var l=a.target.tags.value.split(" "),n=[],r=0;r<l.length;r++)""!==l[r]&&void 0!==l[r]&&(t.includes(l[r])?B.b.error("'".concat(l[r],"' is already blacklisted."),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):n.push(l[r]));var o=[].concat(Object(S.a)(t),n);e({type:"blacklist/set",payload:o}),c("blacklist",o.join(O.arraySeparator),{path:"/"}),a.target.tags.value=null},inline:!0},n.a.createElement(N.a.Group,{controlId:"formBlacklist"},n.a.createElement(N.a.Control,{className:"mb-2 mr-sm-2",type:"text",name:"tags",placeholder:"Tags to blacklist..."}),n.a.createElement(x.a,{variant:"primary",type:"submit",className:"mb-2"},"Add"))),n.a.createElement(A.a,null,t.map((function(e,t){return n.a.createElement(A.a.Item,{variant:"danger",key:t,onClick:m},e)}))),n.a.createElement(B.a,null))},T=function(){return n.a.createElement(L,null,n.a.createElement("h1",null,"Guide"),n.a.createElement("h3",null,"Home"),n.a.createElement("p",null,"When you first go on the site you will be greeted with the home page. From here you will be able to search for posts using the various input boxes. Enter in a few phrases of what you want (for instance, ",n.a.createElement("code",null,"order:score rating:s date:month"),' will find you the highest ranked SFW posts in the last month for most image sites), then click the blue "search" button to find posts.'),n.a.createElement("p",null,"Once the previews load, you can then click on a post again to load the high quality version of it. If an item is a video or Flash file, it will open in a separate tab."),n.a.createElement("h3",null,"Source"),n.a.createElement("p",null,"On the source page you can change where the app gets posts from. Currently the site supports the following sources officially:"),n.a.createElement("ul",null,Object.keys(g).map((function(e,t){return n.a.createElement("li",null,g[e].display)}))),n.a.createElement("p",null,"Simply click on the card of the site you want to use, then head back to the home page and search. This value will be saved across site visits if you have cookies enabled."),n.a.createElement("h3",null,"Blacklist"),n.a.createElement("p",null,'If you want to block out certain posts from showing up you can block them based on the tags they have in the Blacklist tab. Simply type in the tags you want to block out and press the blue "add" button. These values will be saved across site visits if you have cookies enabled.'))},G=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.config})),l=Object(s.a)(["site"]),r=Object(i.a)(l,2)[1];return n.a.createElement("div",{className:"card",onClick:function(a){t({type:"config/modify",payload:e.name}),r("site",e.name,{path:"/"})}},n.a.createElement("div",{className:"card-body"},a===e.name?n.a.createElement("h2",null,n.a.createElement("strong",null,e.config.display)," (selected)"):n.a.createElement("h2",null,e.config.display),n.a.createElement("p",null,e.config.descriptors.join(", "))))},D=function(){return n.a.createElement(L,null,n.a.createElement("h1",null,"Source"),n.a.createElement("p",null,"Choose which site to get posts from."),Object.keys(g).map((function(e,t){return n.a.createElement(G,{key:e,name:e,config:g[e]})})))},H=function(e){var t=Object(o.c)((function(e){return e.config})),a=g[t],r=C(a.file.full,e.post),c=Object(l.useState)(r?{error:!1,post:C(a.file.post,e.post),full:r,preview:C(a.file.preview,e.post),type:I(r),displayFull:!1}:{error:!0}),s=Object(i.a)(c,2),u=s[0],m=s[1];if(u.error)return null;return n.a.createElement("div",{className:"post"},n.a.createElement("img",{alt:"",src:u.displayFull?u.full:u.preview,className:u.type,onClick:function(){if("image"===u.type||"gif"===u.type)if(u.displayFull){var e=window.open(u.full);e&&(e.opener=null)}else m(Object(p.a)(Object(p.a)({},u),{},{displayFull:!0}));else{var t=window.open(u.full,"_blank","noopener,noreferrer");t&&(t.opener=null)}},onMouseDown:function(e){if(1===e.button){var t=window.open(u.full);t&&(t.opener=null)}}}))},P=a(34),R=function(e){var t=Object(o.b)(),a=Object(l.useState)({tags:null,page:1,limit:50}),r=Object(i.a)(a,2),c=r[0],s=r[1],u=(Object(o.c)((function(e){return e.search})),function(e){s(Object(p.a)(Object(p.a)({},c),{},Object(P.a)({},e.target.name,e.target.value))),t({type:"search/".concat(e.target.name),payload:e.target.value})});return n.a.createElement("div",{className:"container mt-5 mb-5"},n.a.createElement(N.a,{id:"search-form",onSubmit:e.doSearch},n.a.createElement(N.a.Group,{controlId:"tags"},n.a.createElement(N.a.Label,null,"Tags"),n.a.createElement(N.a.Control,{name:"tags",type:"text",value:c.tags,placeholder:"rating:s",onChange:u})),n.a.createElement(N.a.Group,{controlId:"page"},n.a.createElement(N.a.Label,null,"Page"),n.a.createElement(N.a.Control,{name:"page",type:"number",value:c.page,min:1,onChange:u})),n.a.createElement(N.a.Group,{controlId:"limit"},n.a.createElement(N.a.Label,null,"Limit"),n.a.createElement(N.a.Control,{name:"limit",type:"number",min:1,value:c.limit,onChange:u})),n.a.createElement(x.a,{className:"mt-2",variant:"primary",type:"submit"},"Search")))},U=function(e){var t=Object(o.b)(),a=Object(l.useState)({error:null,hasSearched:!1,isLoaded:!1,blacklistedCount:0}),r=Object(i.a)(a,2),c=r[0],s=r[1],u=Object(o.c)((function(e){return e.posts})),m=Object(o.c)((function(e){return e.config})),d=Object(o.c)((function(e){return e.blacklist})),h=function(e){return c.error?n.a.createElement("div",{className:"error"},"Error: ",c.error.message):!c.isLoaded&&c.hasSearched?n.a.createElement("div",{className:"loading"},"Loading..."):c.isLoaded&&u.length<1&&!c.error?n.a.createElement("div",{className:"error"},"No posts were found. (",c.blacklistedCount," posts were blacklisted)"):c.isLoaded?n.a.createElement("div",null,n.a.createElement("div",{id:"posts"},e.items.map((function(e){return n.a.createElement(H,{post:e})})))):n.a.createElement("div",null)};return n.a.createElement("div",null,n.a.createElement(R,{doSearch:function(e){e.preventDefault(),s(Object(p.a)(Object(p.a)({},c),{},{hasSearched:!0,isLoaded:!1}));var a=g[m],l=e.target.tags.value;""===l&&(l="rating:s"),fetch(a.url.post+"?"+new URLSearchParams({tags:l,page:e.target.page.value,limit:e.target.limit.value})).then((function(e){return e.json()})).then((function(e){var l=C(a.posts,e),n=0,r=l.filter((function(e){var t=function(e,t){var a=[];if(Array.isArray(t))return C(t,e);Object.keys(t).forEach((function(e,l){if("other"===e)for(var n=0;n<t[e].length;n++)a.push(t[e][n]);else a.push(t[e])}));for(var l=[],n=0;n<a.length;n++){var r=C(a[n],e);l=[].concat(Object(S.a)(l),"string"===typeof r?Object(S.a)(r.split(" ")):Object(S.a)(r))}return l}(e,a.tags);return!d.some((function(e){return t.includes(e)}))||(n++,!1)}));s(Object(p.a)(Object(p.a)({},c),{},{isLoaded:!0,error:!1,blacklistedCount:n})),t({type:"posts/set",payload:r}),c.blacklistedCount>0&&B.b.error("".concat(c.blacklistedCount," posts were blocked."),{position:"top-right",autoClose:4e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),(function(e){s(Object(p.a)(Object(p.a)({},c),{},{isLoaded:!0,error:!0})),t({type:"posts/set",payload:[]})}))}}),n.a.createElement(h,{items:u}),n.a.createElement(B.a,null))},M=function(){return n.a.createElement(U,null)},J=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.config})),a=Object(s.a)(["site"]),l=Object(i.a)(a,1)[0];return null===t&&(void 0!==l.site?e({type:"config/modify",payload:l.site}):e({type:"config/modify",payload:Object.keys(g)[0]})),n.a.createElement(u.a,null,n.a.createElement(w,null),n.a.createElement(m.c,null,n.a.createElement(m.a,{exact:!0,path:"/",component:M}),n.a.createElement(m.a,{exact:!0,path:"/source",component:D}),n.a.createElement(m.a,{exact:!0,path:"/blacklist",component:F}),n.a.createElement(m.a,{exact:!0,path:"/guide",component:T}),n.a.createElement(m.a,{exact:!0,path:"/about",component:_})))};c.a.render(n.a.createElement(o.a,{store:b},n.a.createElement(J,null)),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.79c9cf7e.chunk.js.map