(this["webpackJsonpokami-viewer"]=this["webpackJsonpokami-viewer"]||[]).push([[0],{53:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(13),o=a.n(r),c=a(11),i=(a(52),a(53),a(17)),s=a(5),u=a(61),m=a(62),p=function(){return l.a.createElement(u.a,null,l.a.createElement(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(u.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(m.a,{className:"mr-auto"},l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Link,{as:i.b,to:"/"},"Home")),l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Link,{as:i.b,to:"/source"},"Source")),l.a.createElement(m.a.Item,null,l.a.createElement(m.a.Link,{as:i.b,to:"/about"},"About")))))},d=a(15),f=a(7),g=function(e,t){for(var a=t,n=0;n<e.length;n++)a=a[e[n]];return a},E=function(e){var t=e.split("."),a=t[t.length-1];return["mp4","webm"].includes(a)?"video":"gif"===a?"gif":"swf"===a?"flash":"image"},b=a(23),h={e621:{name:"e621",display:"e621",tags:["furry","nsfw"],url:{base:"https://e621.net",post:"https://e621.net/posts.json",params:{tags:"tags",page:"page",limit:"limit"}},posts:["posts"],file:{post:["id"],preview:["preview","url"],full:["file","url"]}},danbooru:{name:"danbooru",display:"Danbooru",tags:["anime","nsfw"],url:{base:"https://danbooru.donmai.us",post:"https://danbooru.donmai.us/posts.json",params:{tags:"tags",page:"page",limit:"limit"}},posts:[],file:{post:["id"],preview:["preview_file_url"],full:["file_url"]}}},v={posts:[],config:"e621"};var y=Object(b.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"config/modify":return Object(f.a)(Object(f.a)({},e),{},{config:t.payload});case"posts/set":return Object(f.a)(Object(f.a)({},e),{},{posts:t.payload});default:return e}})),j=function(e){var t=Object(c.c)((function(e){return e.config})),a=h[t],r=g(a.file.full,e.post),o=Object(n.useState)(r?{error:!1,post:g(a.file.post,e.post),full:r,preview:g(a.file.preview,e.post),type:E(r),displayFull:!1}:{error:!0}),i=Object(d.a)(o,2),s=i[0],u=i[1];if(s.error)return null;return l.a.createElement("div",{className:"post"},l.a.createElement("img",{src:s.displayFull?s.full:s.preview,className:s.type,onClick:function(){if("image"===s.type||"gif"===s.type)if(s.displayFull){var e=window.open(s.full);e&&(e.opener=null)}else u(Object(f.a)(Object(f.a)({},s),{},{displayFull:!0}));else{var t=window.open(s.full,"_blank","noopener,noreferrer");t&&(t.opener=null)}},onMouseDown:function(e){if(1===e.button){var t=window.open(s.full);t&&(t.opener=null)}}}))},w=a(60),O=a(59),k=function(e){var t=Object(n.useState)({tags:"rating:s",page:1,limit:25}),a=Object(d.a)(t,2),r=a[0],o=a[1];return l.a.createElement("div",{className:"container mt-5 mb-5"},l.a.createElement(w.a,{id:"search-form",onSubmit:e.doSearch},l.a.createElement(w.a.Group,{controlId:"tags"},l.a.createElement(w.a.Label,null,"Tags"),l.a.createElement(w.a.Control,{name:"tags",type:"text",value:r.tags,onChange:function(e){return o(Object(f.a)(Object(f.a)({},r),{},{tags:e.target.value}))}})),l.a.createElement(w.a.Group,{controlId:"page"},l.a.createElement(w.a.Label,null,"Page"),l.a.createElement(w.a.Control,{name:"page",type:"number",value:r.page,onChange:function(e){return o(Object(f.a)(Object(f.a)({},r),{},{page:e.target.value}))}})),l.a.createElement(w.a.Group,{controlId:"limit"},l.a.createElement(w.a.Label,null,"Limit"),l.a.createElement(w.a.Control,{name:"limit",type:"number",value:r.limit,onChange:function(e){return o(Object(f.a)(Object(f.a)({},r),{},{limit:e.target.value}))}})),l.a.createElement(O.a,{className:"mt-2",variant:"primary",type:"submit"},"Search")))},L=function(e){var t=Object(c.b)(),a=Object(n.useState)({error:null,hasSearched:!1,isLoaded:!1}),r=Object(d.a)(a,2),o=r[0],i=r[1],s=Object(c.c)((function(e){return e.posts})),u=Object(c.c)((function(e){return e.config}));return l.a.createElement("div",null,l.a.createElement(k,{doSearch:function(e){e.preventDefault(),i({hasSearched:!0,isLoaded:!1});var a=h[u];fetch(a.url.post+"?"+new URLSearchParams({tags:e.target.tags.value,page:e.target.page.value,limit:e.target.limit.value})).then((function(e){return e.json()})).then((function(e){i({isLoaded:!0,error:!1}),t({type:"posts/set",payload:g(a.posts,e)})}),(function(e){i({isLoaded:!0,error:!0}),t({type:"posts/set",payload:[]})}))}}),o.error&&l.a.createElement("div",{className:"error"},l.a.createElement("p",null,"Error: ",o.error.message)),!o.isLoaded&&o.hasSearched&&l.a.createElement("div",null,l.a.createElement("p",{className:"loading"},"Loading...")),o.isLoaded&&l.a.createElement("div",{id:"posts"},s.map((function(e){return l.a.createElement(j,{post:e})}))),o.isLoaded&&s.length<1&&!o.error&&l.a.createElement("div",{className:"error"},"No posts found."))},S=function(){return l.a.createElement(L,null)},N=a(63),C=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.config})),n=Object(N.a)(["site"]),r=Object(d.a)(n,2),o=r[0],i=r[1];void 0!==o.site&&o.site!==a&&t({type:"config/modify",payload:e.name});return l.a.createElement("div",{className:"card",onClick:function(a){t({type:"config/modify",payload:e.name}),i("site",e.name,{path:"/"})}},l.a.createElement("div",{className:"card-body"},a===e.name?l.a.createElement("h2",null,l.a.createElement("strong",null,e.config.display)," (selected)"):l.a.createElement("h2",null,e.config.display),l.a.createElement("p",null,e.config.tags.join(", "))))},I=function(){return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("h1",null,"Source"),l.a.createElement("p",null,"Choose which site to get posts from."),Object.keys(h).map((function(e,t){return l.a.createElement(C,{key:e,name:e,config:h[e]})})))},x=function(){return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("h1",null,"Blacklist"),l.a.createElement("p",null,"Choose which tags you want to block from your search, either individually or from a group."))},A="\u014ckami",F={github:"Breath"},U=function(){return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("h1",null,"About"),l.a.createElement("p",null,l.a.createElement("strong",null,A)," is a simple, easy to use alternative to most image gallery's UI. Made using React by ",function(e,t){var a,n=null;switch(e){case"github":n="https://github.com/"+t}return l.a.createElement("span",null,l.a.createElement("strong",null,l.a.createElement("a",{href:n},"@",t))," on ",l.a.createElement("strong",null,(a=e).charAt(0).toUpperCase()+a.slice(1)))}("github",F.github),"."),l.a.createElement("h3",null,"To-do"),l.a.createElement("ul",null,l.a.createElement("li",null,"Implement blacklist functionality."),l.a.createElement("li",null,"Add ",l.a.createElement("code",null,"order:"),", ",l.a.createElement("code",null,"date:"),", etc sliders to search box."),l.a.createElement("li",null,"Create a logo (and add ",l.a.createElement("code",null,"favicon.ico")," / ",l.a.createElement("code",null,"logo192.png"),").")),l.a.createElement("h3",null,"v0.1.1"),l.a.createElement("ul",null,l.a.createElement("li",null,"Renamed ",l.a.createElement("code",null,"Sites")," page to ",l.a.createElement("code",null,"Source"),"."),l.a.createElement("li",null,"Updated search box on the front page to be more centered.")),l.a.createElement("h3",null,"v0.1.0"),l.a.createElement("ul",null,l.a.createElement("li",null,"Initial release.")))},_=function(){return l.a.createElement(i.a,null,l.a.createElement(p,null),l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/",component:S}),l.a.createElement(s.a,{exact:!0,path:"/source",component:I}),l.a.createElement(s.a,{exact:!0,path:"/blacklist",component:x}),l.a.createElement(s.a,{exact:!0,path:"/about",component:U})))};o.a.render(l.a.createElement(c.a,{store:y},l.a.createElement(_,null)),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.2049ba9c.chunk.js.map